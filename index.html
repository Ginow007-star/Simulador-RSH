<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simulador CSE – RSH</title>

<style>
:root{
  --primario:#0033A0;
  --secundario:#E6ECF5;
  --exito:#16A34A;
  --alerta:#F59E0B;
  --peligro:#DC2626;
}

body{
  font-family:Arial,Helvetica,sans-serif;
  background:var(--secundario);
  padding:20px;
}

.card{
  max-width:900px;
  margin:auto;
  background:#fff;
  padding:20px;
  border-radius:10px;
  box-shadow:0 4px 10px rgba(0,0,0,.1);
}

h1,h2{color:var(--primario)}

label{font-weight:bold;display:block;margin-top:10px}
input,select{width:100%;padding:8px;margin-top:4px}

button{
  margin-top:15px;
  padding:10px;
  background:var(--primario);
  color:#fff;
  border:none;
  border-radius:6px;
  cursor:pointer;
}

.member{
  border:1px solid #ccc;
  padding:10px;
  margin-top:10px;
  border-radius:6px;
}

.result{
  margin-top:20px;
  padding:15px;
  border-radius:6px;
}

.green{background:#DCFCE7;border-left:5px solid var(--exito)}
.yellow{background:#FEF9C3;border-left:5px solid var(--alerta)}
.orange{background:#FFEDD5;border-left:5px solid var(--alerta)}
.red{background:#FEE2E2;border-left:5px solid var(--peligro)}
</style>
</head>

<body>
<div class="card" id="contenido">

<h1>Simulador Calificación Socioeconómica (RSH)</h1>

<h2>Jefe/a de hogar</h2>
<label>Edad</label>
<input id="edadJefe" type="number">

<label>Ingreso mensual líquido ($)</label>
<input id="ingresoJefe" type="number" value="0">

<h2>Integrantes</h2>
<div id="members"></div>
<button onclick="agregarIntegrante()">➕ Agregar integrante</button>

<h2>Evaluación de medios</h2>

<label>Vehículo de alto valor (≥ $25.000.000)</label>
<select id="vehiculo">
  <option value="no">No</option>
  <option value="si">Sí</option>
</select>

<button onclick="calcular()">Calcular</button>
<button onclick="exportarPDF()">Exportar PDF</button>

<div id="resultado"></div>
<div id="analisis"></div>

</div>

<script>
let contador = 0;

function agregarIntegrante(){
  contador++;
  const d = document.createElement("div");
  d.className = "member";
  d.innerHTML = `
    <label>Edad integrante</label>
    <input type="number" class="edad">
    <label>Ingreso mensual ($)</label>
    <input type="number" class="ingreso" value="0">
  `;
  document.getElementById("members").appendChild(d);
}

function calcular(){
  let edades = [];
  let ingresoTotal = Number(ingresoJefe.value)||0;

  if(edadJefe.value) edades.push(Number(edadJefe.value));

  document.querySelectorAll(".member").forEach(m=>{
    const e = m.querySelector(".edad").value;
    const i = m.querySelector(".ingreso").value;
    if(e) edades.push(Number(e));
    ingresoTotal += Number(i)||0;
  });

  const N = edades.length || 1;
  const IN = Math.pow(N,0.7);

  let ingresoEq = ingresoTotal / IN;

  if(vehiculo.value==="si") ingresoEq *= 1.15;

  let tramo="",clase="";
  if(ingresoEq<250000){tramo="0–40%";clase="green";}
  else if(ingresoEq<400000){tramo="41–60%";clase="yellow";}
  else if(ingresoEq<600000){tramo="61–80%";clase="orange";}
  else{tramo="81–100%";clase="red";}

  resultado.innerHTML = `
    <div class="result ${clase}">
      <strong>Ingreso equivalente:</strong> $${ingresoEq.toFixed(0)}<br>
      <
